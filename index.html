<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>canvas</title>
</head>
<style type="text/css">
	#teste{
		border: 3px inset #e3eeff;
		display: block;
	}
	#teste:hover{
		border: 3px outset #e3eeff;
		display: block;
		opacity: 0.9;
	}
	#imgbaixar{
	}
</style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
<body>

	
<div class="container">
	<!-- NOME -->
  <div class="mb-3">
  <label for="nome" class="form-label">Name</label>
  <input type="text" class="form-control" id="nome" placeholder="Name">
  <!-- rANK -->
  <label for="form-select" class="form-label">Rank</label>
  <select class="form-select" aria-label="Default select example" id="selecionado">
  <option value="0">SoldadoğŸ½ (1 dia)</option>
  <option value="1">CaboğŸ— (2 dias)</option>
  <option value="2">Terceiro SargentoğŸ¥‰ (3-5 dias)</option>
    <option value="3">Segundo SargentoğŸ¥ˆ (6-10 dias)</option>
  <option value="4">Primeiro SargentoğŸ¥‡ (11-13 dias)</option>
  <option value="5">Subtenente âšœ (14-15 dias)</option>
    <option value="6">Aspirante a Oficial âšœâšœ (16-20 dias)</option>
  <option value="7">Segundo TenenteğŸ… (21-23 dias)</option>
  <option value="8">Primeiro TenenteğŸ– (24 dias) </option>
    <option value="9">CapitÃ£oğŸ–ğŸ– (25 dias)</option>
  <option value="10">Major ğŸ–ğŸ–ğŸ– (26 dias)</option>
  <option value="11">Coronel â­â­ (27 dias)</option>
  <option value="12">General de ExÃ©rcito â­â­â­ (28 dias)</option>
  <option value="13">Rei ğŸ‘‘ (29 dias)</option>
  <option value="14">Monge â™¾ (30 dias)</option>
</select>

<label for="form-select" class="form-label">Idioma</label>
  <select class="form-select" aria-label="Default select example" id="idiomaselect">
  <option value="ptbr">Portuguese</option>
  <option value="en">English</option>
  <option value="es">Spanish</option>
</select>

<button type="button" id="botao" onclick="gerar()" class="btn btn-primary">generate</button>
</div>
	
  
	<canvas id="teste" height="500px" width="500px" class="img-fluid">
</canvas>
<button type="button" id="botao" onclick="dload()" class="btn btn-primary">Download</button>
<div id="divbaixarconteudo">
	
</div>
</div>


</body>
<script type="text/javascript">
	let nome="";
	let canvas = document.getElementById('teste')

	let contexto = canvas.getContext('2d')

	
	let ranksemoji = ['ğŸ½','ğŸ—','ğŸ¥‰','ğŸ¥ˆ','ğŸ¥‡','âšœ','âšœâšœ','ğŸ…','ğŸ–','ğŸ–ğŸ–','ğŸ–ğŸ–ğŸ–','â­â­','â­â­â­','ğŸ‘‘','â™¾']


	function setidioma(idioma) {
		if (idioma == "ptbr") {
			palavras = ["Promovido","a"]

			ranks = ['Soldado','Cabo','3Âº Sargento','2Âº Sargento','1Âº Sargento','Subtenente','Aspirante a Oficial','2Âº Tenente','1Âº Tenente','CapitÃ£o','Major','Coronel','G. de ExÃ©rcito','Rei','Monge']
		}else if(idioma == 'en'){

			palavras = ["Promoted","The"]

			ranks = ['Soldier','Cape','3rd Sergeant','2nd Sergeant','1st Sergeant','Lieutenant','Aspiring Officer','2nd Lieutenant','1st Lieutenant','Captain','Major ','Colonel','G. of Army','King','Monk']
		}else if(idioma == 'es'){

			palavras = ["Promocionado", "a"]

			ranks = ['Soldado', 'Cabo', '3er Sargento', '2do Sargento', '1er Sargento', 'Teniente', 'Aspirante a Oficial', '2do Teniente', '1er Teniente', 'CapitÃ¡n', 'Mayor' , 'Coronel', 'G. of Army ',' King ',' Monk ']
		}
	}

	setidioma("ptbr")
	function gerar() {
		setidioma(document.getElementById("idiomaselect").value)

		contexto.font='60px sans-serif'
		
		carregarimg()
	}

	//Gerar imagem
	function carregarimg() {

		imgbase= new Image();
		imgbase.src = "ccle.png"

		
		imgbase.onload = function () {
			contexto.drawImage(imgbase,0,0,500,500)
			formatonome()
		}
	}
	//Gerar Nome
	function formatonome(){
		nome = document.getElementById('nome').value
		contexto.fillStyle="yellow"
		if (nome == "") {
			nome="Unknown"
		}
		contexto.textAlign = 'center'
		contexto.fillText(nome,250,160)
		//if (nome.length  <= 4) {
		//	
		//}
		contexto.fillStyle="white"
		texto()
	}

	//Gerar patente e emoji
	function texto(){
		contexto.fillStyle="white"
		rank = document.getElementById('selecionado').value
		contexto.fillText(palavras[0],250,210)//promovido
		if(ranks[rank].length >= 10){
			console.log('rank grande')
			contexto.font='45px sans-serif'
			contexto.fillText(palavras[1],250,245)//a
			contexto.font='60px arial'
			contexto.fillStyle="yellow"
			contexto.fillText(ranks[rank],250,300)//soldado
		}else{
			contexto.fillText(palavras[1],120,260)//a
			contexto.font='60px sans-serif'
			contexto.fillStyle="yellow"
			contexto.fillText(ranks[rank],280,270)//soldado
		}
		

		//emoji
		contexto.fillText(ranksemoji[rank],250,410)
	}

	function dload() {
		let canvas = document.getElementById('teste')
    	let img    = canvas.toDataURL("image/png");
    	divbaixar= document.getElementById('divbaixarconteudo')

    	divbaixar.innerHTML = '<img class="img-fluid" src="'+img+'"/>'
	}



	//contexto.fillStyle="green"
	
	//contexto.fillRect(0,0,250,250)

	//teste add imagem
	



	
	
	

</script>
</html>
